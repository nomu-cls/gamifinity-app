# LINE文面のカスタマイズガイド

## 概要
LINEボットの文面は、Edge Functionのコード内で定義されています。
文面を変更したい場合は、該当のファイルを編集して再デプロイします。

## 1. リマインダー文面の変更

### 編集ファイル
`supabase/functions/send-reminders/index.ts`

### 変更箇所（99-101行目）
```typescript
let message = `🌟 おはようございます！\n\nDay ${currentDayInfo.day} 「${currentDayInfo.title}」の課題がまだ未提出です。\n今日の予測ストーリーを書きましょう！`;

message += '\n\n下記のフォームから記入してください：\nhttps://liff.line.me/2008723961-kvLXuRgp';
```

### カスタマイズ例
```typescript
// もっとフレンドリーな文面
let message = `✨ ${currentDayInfo.title}へようこそ！\n\nDay ${currentDayInfo.day}の課題に取り組んでみませんか？\nあなたの物語が待っています 📖`;

// もっと簡潔な文面
let message = `📝 Day ${currentDayInfo.day}未提出\n\n${currentDayInfo.title}の課題を書きましょう`;

// もっと丁寧な文面
let message = `おはようございます。\n\nDay ${currentDayInfo.day}「${currentDayInfo.title}」の課題がまだ提出されていません。\n\nお時間のある時にぜひご記入ください。\nあなたの未来を描く大切な一歩です。`;
```

## 2. メールアドレス登録時の文面

### 編集ファイル
`supabase/functions/line-webhook/index.ts`

### 変更箇所（147行目）
```typescript
replyText = `✅ メールアドレス "${email}" を登録しました！\n課題未提出時にリマインダーをお送りします。`;
```

### カスタマイズ例
```typescript
// もっと詳しく
replyText = `✅ 登録完了\n\nメール: ${email}\n\n毎朝9時に、課題の提出状況を確認してリマインダーをお送りします。\n提出済みの場合は通知されません。`;

// シンプルに
replyText = `✅ ${email} を登録しました`;

// 絵文字多め
replyText = `🎉 登録ありがとうございます！\n\n📧 ${email}\n⏰ 毎朝9時にリマインダー送信\n✨ 未提出の課題のみ通知`;
```

## 3. リマインダーオン/オフの文面

### 変更箇所（154, 160行目）
```typescript
// オン
replyText = '✅ リマインダーをオンにしました！毎日朝9時に予測リマインダーをお送りします。';

// オフ
replyText = '⏸️ リマインダーをオフにしました。';
```

### カスタマイズ例
```typescript
// オン（詳しく）
replyText = '🔔 リマインダー設定完了\n\n毎朝9時に課題の提出状況をチェックして、未提出の場合のみ通知します。';

// オフ（優しく）
replyText = '⏸️ リマインダーを停止しました。\n\nまた必要になったら「リマインダーオン」と送信してください。';
```

## 4. ヘルプメッセージの文面

### 変更箇所（166, 168行目）
```typescript
// メールヘルプ
replyText = `📧 メールアドレス登録\n現在: ${currentEmail}\n\nメールアドレスを送信すると、課題の提出状況に応じてリマインダーを送信します。\n\n例: example@mail.com`;

// 全般ヘルプ
replyText = `こんにちは！予測ストーリー記録システムです。\n\nコマンド：\n- メールアドレスを送信→課題連携\n- 「リマインダーオン」→毎日9時にリマインダー\n- 「リマインダーオフ」→リマインダー停止\n- 「ヘルプ」→使い方表示`;
```

### カスタマイズ例
```typescript
// もっとわかりやすく
replyText = `📱 使い方ガイド

【初回設定】
1. メールアドレスを送信
2. 「リマインダーオン」と送信

【毎日の使い方】
- 課題を提出 → 通知なし
- 課題未提出 → 朝9時に通知

【コマンド一覧】
📧 メールアドレス → 登録
🔔 リマインダーオン → 通知開始
⏸️ リマインダーオフ → 通知停止
❓ ヘルプ → この画面表示`;
```

## 5. 文面変更の反映方法

### ステップ1: ファイルを編集
該当のファイルを開いて、文面を変更

### ステップ2: 再デプロイ
私に「リマインダーの文面を変更したので再デプロイして」と依頼してください。
または、以下のコマンドを実行：

```bash
# send-remindersの再デプロイは私が行います
```

### ステップ3: 動作確認
1. LINEボットにメッセージを送信
2. 変更した文面が表示されることを確認

## 6. 文面作成のベストプラクティス

### DO（推奨）
- ✅ 簡潔でわかりやすい表現
- ✅ 適度な絵文字（1-3個程度）
- ✅ 改行を使って読みやすく
- ✅ アクションを促す言葉
- ✅ ポジティブな表現

### DON'T（非推奨）
- ❌ 長すぎる文章（3行以上の段落）
- ❌ 絵文字の使いすぎ
- ❌ 専門用語や難しい言葉
- ❌ ネガティブな表現
- ❌ 命令口調

## 7. よくある変更例

### 時間帯を変更したい
```typescript
// 夜21時に変更する場合
const reminderTime = user.reminder_time || '21:00:00';
```

### 曜日によって文面を変える
```typescript
const dayOfWeek = now.getDay();
const dayNames = ['日', '月', '火', '水', '木', '金', '土'];

let message = `おはようございます！${dayNames[dayOfWeek]}曜日ですね。\n\n`;
message += `Day ${currentDayInfo.day}の課題に取り組みましょう！`;
```

### ユーザー名を入れる
```typescript
// display_nameは既にline_usersテーブルに保存されています
let message = `${user.display_name}さん、おはようございます！\n\n`;
message += `Day ${currentDayInfo.day}の課題がまだ未提出です。`;
```

## サポート

文面の変更を依頼する場合は、以下を教えてください：
1. どの文面を変更したいか（リマインダー、登録確認、ヘルプなど）
2. どのような文面にしたいか（具体例があれば）
3. 雰囲気（フレンドリー、丁寧、簡潔など）
